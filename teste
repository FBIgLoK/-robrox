local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local Camera = workspace.CurrentCamera

local LocalPlayer = Players.LocalPlayer
local AIM_PART = "Head"
local MAX_DISTANCE = 2000

-- pega o player mais próximo de você
local function getClosestPlayer()
	local closestPlayer = nil
	local shortestDistance = math.huge

	local myChar = LocalPlayer.Character
	if not myChar then return nil end

	local myRoot = myChar:FindFirstChild("HumanoidRootPart")
	if not myRoot then return nil end

	for _, player in pairs(Players:GetPlayers()) do
		if player ~= LocalPlayer and player.Character then
			local humanoid = player.Character:FindFirstChildOfClass("Humanoid")
			local root = player.Character:FindFirstChild("HumanoidRootPart")
			local head = player.Character:FindFirstChild(AIM_PART)

			if humanoid and humanoid.Health > 0 and root and head then
				local distance = (root.Position - myRoot.Position).Magnitude
				if distance < shortestDistance and distance <= MAX_DISTANCE then
					shortestDistance = distance
					closestPlayer = head
				end
			end
		end
	end

	return closestPlayer
end

-- LOOP PRINCIPAL
RunService.RenderStepped:Connect(function()
	local targetHead = getClosestPlayer()
	if targetHead then
		local camPos = Camera.CFrame.Position
		Camera.CFrame = CFrame.new(camPos, targetHead.Position)
	end
end)
